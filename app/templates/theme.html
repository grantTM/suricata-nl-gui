<div class="theme-switch-wrapper">
    <label class="theme-switch">
        <input type="checkbox" id="theme-toggle" />
        <span class="slider"></span>
    </label>
</div>

<script>
    const style = document.getElementById('theme-style');
    const toggle = document.getElementById('theme-toggle');

    function applyLightMode() {
        style.innerHTML = style.innerHTML.replace(
            /:root\s*{[^}]+}/,
            `:root {
                --bg: #ffffff;
                --text: #111111;
                --input-bg: #f9f9f9;
                --input-text: #000000;
                --button-bg: #dddddd;
                --button-text: #000000;
                --alert-color: #cc0000;
            }`
        );
        localStorage.setItem('theme', 'light');
        toggle.checked = true;
    }

    function applyDarkMode() {
        location.reload();
        localStorage.setItem('theme', 'dark');
    }

    toggle.addEventListener("change", () => {
        if (toggle.checked) {
            applyLightMode();
        } else {
            applyDarkMode();
        }
    });

    // Apply saved theme on load
    window.addEventListener("DOMContentLoaded", () => {
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme === "light") {
            applyLightMode();
        } else {
            toggle.checked = false;
        }
    });
</script>